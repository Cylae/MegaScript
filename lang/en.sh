#!/bin/bash
# English Language File

# --- Global ---
MSG_PRESS_ANY_KEY="Press any key to continue..."
MSG_ERROR_INVALID_OPTION="Invalid option. Please try again."
MSG_INFO_OPERATION_CANCELLED="Operation cancelled."

# --- Language Selection ---
PROMPT_CHOOSE_LANGUAGE="Please choose a language: [1] English, [2] Fran√ßais"

# --- Main Menu ---
MENU_MAIN_TITLE="Server Setup & Management Menu"
MENU_MAIN_HEADER="============================================="
MENU_SECTION_INITIAL="--- Initial Setup ---"
MENU_OPTION_1="1. Initial Server Setup (Update, Firewall, LEMP)"
MENU_OPTION_2="2. Add New Website (with SSL)"
MENU_OPTION_3="3. Setup Mail Server (Postfix & Dovecot)"
MENU_OPTION_4="4. Create SFTP User"
MENU_OPTION_5="5. Harden Security (Install Fail2ban)"
MENU_SECTION_UTILS="--- Utilities ---"
MENU_OPTION_6="6. Backup Website"
MENU_OPTION_7="7. Restore Website"
MENU_SECTION_MGMT="--- Management ---"
MENU_OPTION_8="8. Manage Existing Services"
MENU_OPTION_9="9. Exit"
PROMPT_CHOOSE_OPTION="Enter your choice"
MSG_EXITING="Exiting script. Goodbye!"

# --- Initial Checks ---
MSG_INFO_RUNNING_CHECKS="Running initial system checks..."
MSG_ERROR_MUST_BE_ROOT="This script must be run as root or with sudo."
MSG_SUCCESS_ROOT_CONFIRMED="Root privileges confirmed."

# --- OS Detection ---
MSG_INFO_DETECTING_OS="Detecting operating system..."
MSG_ERROR_CANNOT_DETECT_OS="Cannot detect operating system from /etc/os-release."
MSG_SUCCESS_DEBIAN_BASED="Detected Debian/Ubuntu based system."
MSG_ERROR_NO_PKG_MANAGER="Cannot find 'dnf' or 'yum' package manager on this system."
MSG_SUCCESS_RHEL_BASED="Detected RHEL/CentOS/Fedora based system."
MSG_ERROR_UNSUPPORTED_OS="Unsupported operating system: %s. This script supports Debian, Ubuntu, CentOS, RHEL, and Fedora."

# --- Initial Setup ---
MSG_WARN_INITIAL_SETUP="This will install and configure the LEMP stack (Nginx, MariaDB, PHP) and set up the firewall."
PROMPT_ARE_YOU_SURE="Are you sure you want to continue? [y/N]:"
MSG_INFO_STARTING_SETUP="Starting initial server setup..."
MSG_SUCCESS_SETUP_COMPLETE="Initial server setup completed successfully."

# --- Firewall ---
MSG_INFO_CONFIG_FIREWALL="Configuring firewall (UFW)..."
MSG_WARN_UFW_NOT_FOUND="UFW command not found. Skipping firewall setup. Please install and configure it manually."
MSG_SUCCESS_FIREWALL_CONFIGURED="Firewall is configured and enabled."

# --- LEMP Stack ---
MSG_INFO_INSTALLING_LEMP="Installing LEMP stack (Nginx, MariaDB, PHP)..."
MSG_INFO_UPDATING_PACKAGES="Updating package lists..."
MSG_ERROR_PHP_FPM_NOT_FOUND="Could not detect a suitable PHP-FPM package. Defaulting to 'php-fpm'."
MSG_INFO_PHP_VERSION_DETECTED="Detected latest PHP version: %s"
MSG_INFO_ENABLE_SERVICES="Enabling and starting services..."
MSG_WARN_PHP_FPM_SERVICE_UNKNOWN="Could not determine PHP-FPM service name to enable it."
MSG_SUCCESS_LEMP_INSTALLED="LEMP stack installed."

# --- MariaDB ---
MSG_INFO_SECURING_MARIADB="Securing MariaDB installation..."
MSG_SUCCESS_MARIADB_SECURED="MariaDB installation has been secured."
MSG_WARN_MARIADB_ROOT_PASSWORD_SET="A new random password has been set for the MariaDB 'root' user."
MSG_WARN_MARIADB_ROOT_PASSWORD_IS="Root password (save this!): %s"
MSG_INFO_MARIADB_PASSWORD_SAVED="Root password saved to /root/.mysql_root_password for script automation."

# --- Add Website ---
MENU_ADD_WEBSITE="--- Add New Website ---"
PROMPT_ENTER_DOMAIN="Enter the domain name (e.g., example.com):"
MSG_ERROR_DOMAIN_EMPTY="Domain name cannot be empty."
MSG_INFO_CREATING_WEB_ROOT="Creating web root at %s..."
MSG_SUCCESS_WEB_ROOT_CREATED="Web root created."
MSG_INFO_CONFIGURING_NGINX="Configuring Nginx server block..."
MSG_SUCCESS_NGINX_CONF_CREATED="Nginx configuration file created at %s."
MSG_INFO_TESTING_NGINX="Testing and reloading Nginx..."
MSG_SUCCESS_NGINX_RELOADED="Nginx configuration reloaded."
MSG_ERROR_NGINX_TEST_FAILED="Nginx configuration test failed. Please check %s"

# --- SSL ---
MSG_INFO_SETTING_UP_SSL="Setting up SSL for %s using Certbot..."
MSG_INFO_CERTBOT_NOT_FOUND="Certbot not found. Installing..."
MSG_SUCCESS_CERTBOT_INSTALLED="Certbot installed."
MSG_INFO_REQUESTING_CERT="Requesting SSL certificate for %s and www.%s..."
PROMPT_ENTER_EMAIL="Enter your email address (for SSL certificate notices):"
MSG_ERROR_EMAIL_REQUIRED="Email is required for Certbot."
MSG_SUCCESS_SSL_OBTAINED="SSL certificate successfully obtained and configured for %s."
MSG_ERROR_SSL_FAILED="Failed to obtain SSL certificate for %s."
MSG_WARN_SITE_HTTP_ONLY="Your site is currently only available via HTTP."

# --- Mail Server ---
MENU_SETUP_MAIL_SERVER="--- Setup Mail Server (Postfix & Dovecot) ---"
MSG_WARN_MAIL_ADVANCED_SETUP="This is an advanced setup. You MUST have a registered domain name and have configured the MX DNS record to point to this server's hostname."
PROMPT_ENTER_MAIL_DOMAIN="Enter your main mail domain (e.g., example.com):"
MSG_ERROR_MAIL_DOMAIN_EMPTY="Mail domain cannot be empty."
PROMPT_ENTER_MAIL_HOSTNAME="Enter the hostname for the mail server (e.g., mail.example.com):"
MSG_ERROR_MAIL_HOSTNAME_EMPTY="Mail hostname cannot be empty."
MSG_INFO_INSTALLING_MAIL_SERVER="Installing Postfix, Dovecot, and Augeas..."
MSG_SUCCESS_MAIL_SERVER_INSTALLED="Postfix and Dovecot installed."
MSG_INFO_CONFIGURING_POSTFIX_MAIN="Configuring Postfix main.cf..."
MSG_INFO_CONFIGURING_POSTFIX_MASTER="Configuring Postfix master.cf for submission..."
MSG_INFO_FOUND_CERT="Found Let's Encrypt certificate for %s."
MSG_WARN_NO_CERT_FOUND="No SSL certificate found for %s. Postfix will use opportunistic TLS without a certificate."
MSG_WARN_CREATE_WEBSITE_FOR_CERT="It is highly recommended to create a website for %s to get a certificate."
MSG_SUCCESS_POSTFIX_CONFIGURED="Postfix configured."
MSG_INFO_CONFIGURING_DOVECOT="Configuring Dovecot with augtool..."
MSG_WARN_DOVECOT_SELF_SIGNED="No SSL certificate found for %s. Dovecot will use self-signed certs."
MSG_SUCCESS_DOVECOT_CONFIGURED="Dovecot configured."
MSG_INFO_OPENING_MAIL_PORTS="Opening mail ports in firewall..."
MSG_SUCCESS_MAIL_PORTS_OPENED="Mail ports opened."
MSG_INFO_RESTARTING_MAIL_SERVICES="Restarting mail services..."
MSG_SUCCESS_MAIL_SERVER_COMPLETE="Mail server setup is complete."
MSG_INFO_ADD_MAIL_USERS_HOW_TO="You can now add email accounts by creating standard Linux users (e.g., 'useradd -m username')."
MSG_INFO_INSTALLING_AUGEAS="Augeas not found. Installing augeas-tools..."
MSG_SUCCESS_AUGEAS_INSTALLED="Augeas installed."
MSG_ERROR_CANNOT_INSTALL_AUGEAS="Package manager not set. Cannot install Augeas."

# --- SFTP User ---
MENU_CREATE_SFTP_USER="--- Create New SFTP User ---"
PROMPT_ENTER_SFTP_USER="Enter the new SFTP username:"
MSG_ERROR_SFTP_USER_EMPTY="SFTP username cannot be empty."
PROMPT_ENTER_SFTP_PASSWORD="Enter the password for %s:"
MSG_ERROR_PASSWORD_EMPTY="Password cannot be empty."
PROMPT_ENTER_SFTP_DIR="Enter the full path of the directory to grant access to (e.g., /var/www/example.com):"
MSG_ERROR_DIR_NOT_EXIST="Directory '%s' does not exist."
MSG_ERROR_SFTP_JAIL_OWNER="SFTP Jail Requirement Failed: The directory '%s' must be owned by 'root'."
MSG_WARN_SFTP_JAIL_PRACTICE="A common practice is to have a root-owned jail (e.g., /var/www/domain) and a writable subdirectory inside it (e.g., /var/www/domain/public_html) owned by the sftp user."
MSG_INFO_CREATING_SFTP_USER="Creating user '%s' and configuring SFTP jail..."
MSG_INFO_USER_EXISTS="User '%s' may already exist. Proceeding with configuration."
MSG_SUCCESS_USER_CREATED="User '%s' created/password updated."
MSG_INFO_CONFIGURING_SSHD="Configuring SSH server for SFTP jail..."
MSG_SUCCESS_SFTP_JAIL_CONFIGURED="SFTP jail configured for '%s' in %s."
MSG_ERROR_SSHD_CONFIG_FAILED="Failed to configure sshd_config with augtool."
MSG_INFO_CREATING_WRITABLE_DIR="Creating writable directory at %s..."
MSG_SUCCESS_WRITABLE_DIR_CREATED="Writable directory created."
MSG_INFO_RESTARTING_SSH="Restarting SSH service..."
MSG_SUCCESS_SSH_RESTARTED="SSH service restarted."
MSG_SUCCESS_SFTP_USER_READY="SFTP user '%s' is ready. User is jailed to '%s' and has write access to '%s'."

# --- Fail2ban ---
MENU_FAIL2BAN="--- Harden Security (Fail2ban) ---"
PROMPT_INSTALL_FAIL2BAN="Install and configure Fail2ban to protect against brute-force attacks? [y/N]:"
MSG_INFO_INSTALLING_FAIL2BAN="Installing Fail2ban..."
MSG_ERROR_FAIL2BAN_INSTALL_FAILED="Failed to install Fail2ban."
MSG_SUCCESS_FAIL2BAN_INSTALLED="Fail2ban installed."
MSG_INFO_CONFIGURING_FAIL2BAN="Configuring Fail2ban jails for SSH, Postfix, and Dovecot..."
MSG_INFO_STARTING_FAIL2BAN="Enabling and starting Fail2ban service..."
MSG_SUCCESS_FAIL2BAN_ACTIVE="Fail2ban is now active and protecting your server."

# --- Backup ---
MENU_BACKUP_WEBSITE="--- Backup Website ---"
PROMPT_ENTER_DOMAIN_TO_BACKUP="Enter the domain of the site to back up (e.g., example.com):"
MSG_ERROR_WEB_ROOT_NOT_EXIST="Web root '%s' does not exist."
PROMPT_ENTER_DB_TO_BACKUP="Enter the name of the database to back up:"
MSG_ERROR_DB_NAME_EMPTY="Database name cannot be empty."
MSG_INFO_STARTING_BACKUP="Starting backup for '%s'..."
MSG_INFO_DUMPING_DB="Dumping database '%s'..."
MSG_ERROR_DB_PASS_NOT_FOUND="MariaDB root password file not found. Cannot automate backup."
MSG_ERROR_DB_DUMP_FAILED="Database dump failed. Check if database '%s' exists."
MSG_SUCCESS_DB_DUMPED="Database dumped successfully."
MSG_INFO_ARCHIVING_FILES="Archiving web root contents from '%s'..."
MSG_INFO_CREATING_BACKUP_FILE="Creating final backup file at '%s'..."
MSG_SUCCESS_BACKUP_COMPLETE="Backup complete! File saved to: %s"

# --- Restore ---
MENU_RESTORE_WEBSITE="--- Restore Website from Backup ---"
MSG_WARN_RESTORE_DESTRUCTIVE="This is a DESTRUCTIVE operation. It will overwrite website files and database content."
PROMPT_ENTER_BACKUP_PATH="Enter the full path to the backup file to restore:"
MSG_ERROR_BACKUP_FILE_NOT_FOUND="Backup file not found at '%s'."
PROMPT_ENTER_DOMAIN_TO_RESTORE="Enter the domain name you are restoring (e.g., example.com):"
PROMPT_ENTER_DB_TO_RESTORE="Enter the name of the database to restore into:"
MSG_WARN_CONFIRM_RESTORE="This will overwrite all files in '%s' and all tables in the database '%s'."
PROMPT_CONFIRM_RESTORE="To confirm, please type the domain name '%s':"
MSG_ERROR_CONFIRMATION_FAILED="Confirmation failed. Restore operation cancelled."
MSG_INFO_EXTRACTING_BACKUP="Extracting backup file..."
MSG_INFO_RESTORING_FILES="Restoring files to '%s'..."
MSG_INFO_MOVED_EXISTING_ROOT="Existing web root moved to '%s.bak-...'. "
MSG_SUCCESS_FILES_RESTORED="Files restored."
MSG_WARN_NO_WEB_ROOT_IN_BACKUP="No 'web_root_content' directory found in backup archive. Skipping file restore."
MSG_INFO_RESTORE_VERSION_NOTE="Note: This script may not be able to restore backups made with older versions."
MSG_INFO_RESTORING_DB="Restoring database '%s' from '%s'..."
MSG_ERROR_DB_RESTORE_PASS_NOT_FOUND="MariaDB root password file not found. Cannot automate restore."
MSG_ERROR_DB_RESTORE_FAILED="Database restore failed."
MSG_SUCCESS_DB_RESTORED="Database restored."
MSG_WARN_NO_SQL_IN_BACKUP="No .sql file found in backup archive. Skipping database restore."
MSG_SUCCESS_RESTORE_COMPLETE="Restore complete for '%s'."

# --- Website Management ---
MENU_WEBSITE_MGMT="--- Website Management Menu ---"
MSG_NO_WEBSITES_FOUND="No website configurations found."
PROMPT_WEBSITE_DELETE="Enter the full config name of the website to delete (e.g., example.com.conf):"
PROMPT_WEBSITE_DISABLE="Enter the config name of the site to disable:"
PROMPT_WEBSITE_ENABLE="Enter the config name of the site to enable:"
MSG_INVALID_SELECTION="Invalid selection or config file not found."
MSG_WARN_PERMANENT_DELETE="This will permanently delete the Nginx config, web files at /var/www/%s, the SSL certificate, and optionally the database."
PROMPT_CONFIRM_DELETE_WEBSITE="To confirm, please type the domain name '%s':"
MSG_NGINX_CONF_REMOVED="Nginx configuration removed."
MSG_WEB_ROOT_REMOVED="Web root directory /var/www/%s removed."
MSG_SSL_CERT_DELETED="SSL certificate for %s deletion attempted."
PROMPT_DELETE_DB="Do you want to delete the associated database? [y/N]:"
PROMPT_ENTER_DB_TO_DELETE="Enter the database name to delete:"
MSG_DB_DELETED="Database '%s' deleted."
MSG_WEBSITE_DELETED="Website '%s' has been completely deleted."
MSG_SITE_DISABLED="Site '%s' has been disabled."
MSG_SITE_ENABLED="Site '%s' has been enabled."
MENU_WEBSITE_OPTION_1="1. Delete a Website"
MENU_WEBSITE_OPTION_2="2. Disable a Website"
MENU_WEBSITE_OPTION_3="3. Enable a Website"
MENU_WEBSITE_OPTION_4="4. Back to Management Menu"

# --- SFTP User Management ---
MENU_SFTP_MGMT="--- SFTP User Management ---"
MSG_JAILED_SFTP_USERS="--- Jailed SFTP Users ---"
MSG_NO_SFTP_USERS="No SFTP users configured in /etc/ssh/sshd_config."
PROMPT_USERNAME_TO_MODIFY="Enter the username to modify:"
MSG_ERROR_USERNAME_EMPTY="Username cannot be empty."
MSG_ERROR_USER_NOT_SFTP="User '%s' is not a configured SFTP user."
PROMPT_NEW_PASSWORD="Enter the new password for %s:"
MSG_PASSWORD_CHANGED="Password for '%s' has been changed."
PROMPT_USERNAME_TO_DELETE="Enter the username to delete:"
MSG_WARN_PERMANENT_DELETE_USER="This will permanently delete the user '%s' and their SFTP configuration."
PROMPT_CONFIRM_DELETE_USER="To confirm, please type the username '%s':"
MSG_USER_DELETED="System user '%s' deleted."
MSG_USER_NOT_FOUND_SKIPPING="System user '%s' not found, skipping userdel."
MSG_INFO_REMOVING_SFTP_CONF="Removing SFTP configuration for '%s'..."
MSG_SUCCESS_SFTP_CONF_REMOVED="SFTP configuration for '%s' removed."
MSG_ERROR_REMOVING_SFTP_CONF="Failed to remove SFTP configuration using augtool."
MSG_SFTP_USER_DELETED="SFTP user '%s' has been deleted."
MENU_SFTP_OPTION_1="1. Change User Password"
MENU_SFTP_OPTION_2="2. Delete User"
MENU_SFTP_OPTION_3="3. Back to Management Menu"

# --- Mail User Management ---
MENU_MAIL_MGMT="--- Email Account Management ---"
MSG_EMAIL_ACCOUNTS="--- Email Accounts ---"
MSG_NO_MAIL_USERS="No mail/system users found."
PROMPT_ADD_EMAIL_USER="Enter the new email username (e.g., 'contact' for 'contact@domain.com'):"
PROMPT_PASSWORD_FOR_ACCOUNT="Enter the password for this account:"
MSG_SUCCESS_EMAIL_CREATED="Email account '%s' created. The user can now log in via IMAP."
PROMPT_USERNAME_TO_DELETE_EMAIL="Enter the username of the account to delete:"
MSG_ERROR_USER_NOT_EXIST="User '%s' does not exist."
MSG_WARN_PERMANENT_DELETE_EMAIL="This will permanently delete the user '%s' and all their emails."
PROMPT_CONFIRM_DELETE_EMAIL="To confirm, please type the username '%s':"
MSG_EMAIL_DELETED="Email account '%s' and all associated data have been deleted."
MENU_MAIL_OPTION_1="1. Add Email Account"
MENU_MAIL_OPTION_2="2. Delete Email Account"
MENU_MAIL_OPTION_3="3. List Email Accounts"
MENU_MAIL_OPTION_4="4. Back to Management Menu"

# --- General Management ---
MENU_MGMT_TITLE="Manage Existing Services"
MENU_MGMT_OPTION_1="1. Manage Websites"
MENU_MGMT_OPTION_2="2. Manage SFTP Users"
MENU_MGMT_OPTION_3="3. Manage Email Accounts"
MENU_MGMT_OPTION_4="4. Back to Main Menu"
MSG_RETURN_TO_MAIN_MENU="Returning to main menu."
